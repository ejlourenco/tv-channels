(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{163:function(t,e,n){},164:function(t,e,n){},166:function(t,e,n){},1785:function(t,e,n){},1786:function(t,e,n){"use strict";n.r(e);var a=n(9),r=n(0),c=n.n(r),i=n(25),o=n.n(i),s=(n(163),n(34)),l=n.n(s),u=n(24),h=n(50),d=n(54),j=(n(164),n(1792)),f=n(1791),b=n(1794),O=n(1790),m=n(21),p=n.n(m),v=n(88),x=n(40),g=n.n(x),y=(n(166),function(t){var e=t.date,n=t.onAddDay;return Object(a.jsxs)("div",{className:"DayNavigator",children:[Object(a.jsx)(g.a,{shape:"circle",icon:Object(a.jsx)(v.LeftOutlined,{}),onClick:function(){return n(-1)}}),p()(e).format("ddd DD MMM"),Object(a.jsx)(g.a,{shape:"circle",icon:Object(a.jsx)(v.RightOutlined,{}),onClick:function(){return n(1)}})]})}),w=n(1795),D=n(113),S=n(1796),k=n(1797),H=n(114),C=n(1798),B=function(t){var e=t.hourInterval,n=t.date,r=t.onAddHour,c=t.onZoomChange;return Object(a.jsxs)("div",{style:{display:"flex",width:"100%",position:"relative"},children:[Object(a.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",position:"absolute",top:"0.3rem"},children:Array.from({length:e+1}).map((function(t,e){return Object(a.jsx)("label",{children:p()(n).add(e,"h").format("HH:mm")},e)}))}),Object(a.jsx)(g.a,{shape:"circle",icon:Object(a.jsx)(w.a,{}),style:{position:"absolute",left:0},onClick:function(){return r(-4)}}),Object(a.jsx)(g.a,{shape:"circle",icon:Object(a.jsx)(D.a,{}),style:{position:"absolute",left:"2rem"},onClick:function(){return r(-1)}}),Object(a.jsx)(g.a,{shape:"circle",icon:Object(a.jsx)(S.a,{}),style:{position:"absolute",left:"calc(50% - 3rem)"},onClick:function(){return c(-1)}}),Object(a.jsx)(g.a,{shape:"circle",icon:Object(a.jsx)(k.a,{}),style:{position:"absolute",right:"calc(50% - 3rem)"},onClick:function(){return c(1)}}),Object(a.jsx)(g.a,{shape:"circle",icon:Object(a.jsx)(H.a,{}),style:{position:"absolute",right:"2rem"},onClick:function(){return r(1)}}),Object(a.jsx)(g.a,{shape:"circle",icon:Object(a.jsx)(C.a,{}),style:{position:"absolute",right:0},onClick:function(){return r(4)}})]})},E=n(1799),I=n(1793),T=n(1788),A=n(55),M=function(t){var e=t.channel,n=t.channelHeight,r=t.onWatchShow;return Object(a.jsx)(I.a,{content:Object(a.jsx)("div",{style:{maxWidth:"20rem",maxHeight:"10rem",overflow:"auto"},children:e.Description}),children:Object(a.jsxs)(T.a,{bodyStyle:{height:n,padding:"0.8rem",display:"flex",justifyContent:"space-between"},children:[Object(a.jsx)("span",{children:e.Title}),Object(a.jsx)(A.a,{size:"small",icon:Object(a.jsx)(E.a,{}),onClick:function(){return r()}})]})})},Y=n(45),W=function(t){var e=t.title,n=t.synopsis,r=t.participants,c=t.width,i=t.channelHeight,o=t.isPlayButtonVisible,s=t.highlight,l=t.onWatchShow;return Object(a.jsx)(I.a,{placement:"bottom",title:e,content:Object(a.jsxs)("div",{style:{maxWidth:"20rem"},children:[Object(a.jsx)("div",{style:{maxHeight:"10rem",overflow:"auto"},children:Object(a.jsx)("p",{children:n})}),r&&Object(a.jsx)("p",{children:r.split(",").join(", ")})]}),children:Object(a.jsxs)(T.a,{style:{position:"relative",left:0,width:c},bodyStyle:{height:i,padding:"0.2rem",fontWeight:""===s?"inherit":(e+" "+n+" "+r).toLowerCase().includes(s)?"bold":"lighter"},children:[Object(a.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e}),o&&Object(a.jsx)(A.a,{size:"small",icon:Object(a.jsx)(E.a,{}),onClick:function(){return l()}})]})})},L=function(){var t=Object(h.a)(l.a.mark((function t(e){var n,a,r,c,i,o,s,u=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(u.length>1&&void 0!==u[1])||u[1],t.next=3,fetch(e);case 3:return a=t.sent,t.next=6,a.json();case 6:if(r=t.sent,c=r.value,!(i=r["odata.nextLink"])||!n){t.next=17;break}return o=i.startsWith("http://")?i.split("http://").join("https://"):i,t.next=13,L(o,n);case 13:return s=t.sent,t.abrupt("return",[].concat(Object(Y.a)(c),Object(Y.a)(s)));case 17:return t.abrupt("return",c);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=Object(h.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L("https://ott.online.meo.pt/catalog/v9/Channels?UserAgent=IPTV_OFR_AND&OfferId=21600543&$orderby=ChannelPosition%20asc&$inlinecount=allpages",!0);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),F=function(){var t=Object(h.a)(l.a.mark((function t(e,n){var a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="YYYY-MM-DDTHH:mm:ss",r=p()(n).add(-1,"day").endOf("day").format(a),c=p()(n).add(1,"day").startOf("day").format(a),t.next=5,L("https://ott.online.meo.pt/Program/v9/Programs?UserAgent=IOS&$orderby=StartDate%20asc&$filter=CallLetter%20eq%20%27".concat(e.CallLetter,"%27%20and%20StartDate%20gt%20datetime%27").concat(r,"%27%20and%20StartDate%20lt%20datetime%27").concat(c,"%27%20and%20IsEnabled%20eq%20true%20and%20IsBlackout%20eq%20false&$inlinecount=allpages"));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),_=function(t){return{StartDate:t.StartDate,EndDate:p()(t.StartDate).add(t.Hours,"hours")}};var N="_all",$={value:N,title:"All"},R={value:N,options:[$]},V=function(t){var e=Object(Y.a)(new Set(t)).map((function(t){return{value:t,title:t}}));return[$].concat(Object(Y.a)(e))},q=function(t,e){var n=t.FriendlyUrlName,a=e||{StartDate:p()(),EndDate:null},r=a.StartDate,c=a.EndDate,i=p()(r).format("YYYY-MM-DDTHH:mm:00"),o=c?p()(c).format("YYYY-MM-DDTHH:mm:00"):"END";return"http://213.13.23.76/wp/cdn-vspp-pcs1.online.meo.pt/shls/LIVE$".concat(n,"/index.m3u8?device=IOS_Live&start=").concat(i,"&end=").concat(o)},U=(n(1785),function(t){return"".concat(p()(t.StartDate).format("HH:mm"),"-").concat(p()(t.EndDate).format("HH:mm"))}),z=function(t,e,n){var a=e.StartDate,r=e.EndDate,c=p()(t.StartDate),i=p()(t.EndDate);c.isBefore(a)?c=p()(a):i.isAfter(r)&&(i=p()(r));var o=p()(i).diff(c,"minute");return"".concat(0===o?0:100*o/n/60,"%")},J=function(t){var e=t.channelHeight,n=t.channel,c=t.timeBlock,i=t.highlight,o=t.onWatchShow,s=Object(r.useState)({shows:[],days:[]}),j=Object(d.a)(s,2),f=j[0],b=j[1],O=Object(r.useRef)(null),m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0px",n=Object(r.useState)(!1),a=Object(d.a)(n,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){var n=new IntersectionObserver((function(t){var e=Object(d.a)(t,1)[0];i(e.isIntersecting&&e.boundingClientRect.height>0)}),{rootMargin:e});return t.current&&n.observe(t.current),function(){t.current&&n.unobserve(t.current)}}),[]),c}(O),v=_(c);Object(r.useEffect)((function(){var t=function(){var t=Object(h.a)(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(n,e);case 2:a=t.sent,b((function(t){return Object(u.a)(Object(u.a)({},t),{},{days:[].concat(Object(Y.a)(t.days),[e]),shows:[].concat(Object(Y.a)(t.shows),Object(Y.a)(a||[]))})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();m&&function(){for(var e=v.StartDate,n=v.EndDate,a=p()(e).startOf("day");a.isBefore(p()(n).endOf("day"));){if(!f.days.find((function(t){return t.isSame(a,"day")}))){var r=a.startOf("day");t(r)}a=p()(a).add(1,"day")}}()}),[c,m]);return Object(a.jsx)("div",{ref:O,className:"ChannelShows__Content",children:m&&function(){var t=_(c),e=t.StartDate,n=t.EndDate;return f.shows.filter((function(t){return!p()(t.EndDate).isBefore(e)&&!p()(t.StartDate).isAfter(n)})).sort((function(t,e){return p()(t.StartDate).isBefore(p()(e.StartDate))?-1:1}))}().map((function(t){return Object(a.jsx)(W,{title:U(t)+" "+t.Title,synopsis:t.Synopsis,participants:t.Participants,width:z(t,v,c.Hours),channelHeight:e,onWatchShow:function(){return o(n,t)},isPlayButtonVisible:p()(t.StartDate).isBefore(p()())&&p()(t.StartDate).isAfter(p()().add(-1,"d")),highlight:i},t.Id)}))})},Z=n(1789),X=Z.a.Option,G=j.a.Header,K=j.a.Sider,Q=j.a.Content,tt="3.4rem",et={timeBlock:{StartDate:p()().startOf("hour"),Hours:6},channels:[],thematic:R,highlight:"",video:{running:!1}};var nt=function(){var t,e=Object(r.useState)(et),n=Object(d.a)(e,2),c=n[0],i=n[1],o=Object(r.useRef)(null),s=function(t,e){var n=Object(r.useState)(t),a=Object(d.a)(n,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){return i(t)}),e);return function(){return clearTimeout(n)}}),[t,e]),c}(c.highlight,500);Object(r.useEffect)((function(){(function(){var t=Object(h.a)(l.a.mark((function t(){var e,n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P();case 2:e=t.sent,n=e.map((function(t){return t.Thematic})),a=V(n),i((function(t){return Object(u.a)(Object(u.a)({},t),{},{channels:e,thematic:Object(u.a)(Object(u.a)({},t.thematic),{},{options:a})})}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var m,v=new Hls,x=function(t,e){i(Object(u.a)(Object(u.a)({},c),{},{video:{running:!0,channel:t,show:e}}));var n=q(t,e);setTimeout((function(){var t=o.current;v.loadSource(n),v.attachMedia(t),v.on(Hls.Events.MANIFEST_PARSED,(function(){t.play()}))}),1e3)},g=function(){var t=c.thematic.value;return t&&t!==N?c.channels.filter((function(e){return e.Thematic===t})):c.channels};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(f.a,{title:(null===(t=c.video.channel)||void 0===t?void 0:t.Title)+" - "+(m=c.video.show,(null===m||void 0===m?void 0:m.Title)||""),centered:!0,visible:c.video.running,onCancel:function(){v.stopLoad(),i(Object(u.a)(Object(u.a)({},c),{},{video:{running:!1}}))},destroyOnClose:!0,footer:null,children:[Object(a.jsx)("video",{ref:o,width:"450",controls:!0}),void 0!==c.video.channel&&Object(a.jsx)("a",{href:q(c.video.channel,c.video.show),target:"_blank",rel:"noreferrer",children:"Open in a new tab"})]}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)(G,{children:Object(a.jsxs)(b.b,{align:"center",style:{width:"100%",height:"100%",alignItems:"baseline"},children:[Object(a.jsx)(Z.a,{value:c.thematic.value,onChange:function(t){i((function(e){return Object(u.a)(Object(u.a)({},e),{},{thematic:Object(u.a)(Object(u.a)({},e.thematic),{},{value:t})})}))},style:{width:"8rem"},children:c.thematic.options.map((function(t){return Object(a.jsx)(X,{value:t.value,children:t.title},t.value)}))}),Object(a.jsx)(O.a,{style:{width:"16rem"},placeholder:"input search text to highlight shows",onChange:function(t){i((function(e){return Object(u.a)(Object(u.a)({},e),{},{highlight:t.target.value})}))}})]})}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)(K,{theme:"light",children:Object(a.jsx)(y,{date:c.timeBlock.StartDate,onAddDay:function(t){i(Object(u.a)(Object(u.a)({},c),{},{timeBlock:{StartDate:p()(c.timeBlock.StartDate).add(t,"days"),Hours:c.timeBlock.Hours}}))}})}),Object(a.jsx)(Q,{children:Object(a.jsx)(B,{hourInterval:c.timeBlock.Hours,date:c.timeBlock.StartDate,onAddHour:function(t){i(Object(u.a)(Object(u.a)({},c),{},{timeBlock:{StartDate:p()(c.timeBlock.StartDate).add(t,"hours"),Hours:c.timeBlock.Hours}}))},onZoomChange:function(t){i(Object(u.a)(Object(u.a)({},c),{},{timeBlock:{StartDate:c.timeBlock.StartDate,Hours:t<0?2*c.timeBlock.Hours:c.timeBlock.Hours/2}}))}})})]}),Object(a.jsxs)(j.a,{style:{overflowY:"auto",overflowX:"hidden",height:"calc(100vh - 6rem)"},children:[Object(a.jsx)(K,{theme:"light",children:g().map((function(t){return Object(a.jsx)(M,{channel:t,channelHeight:tt,onWatchShow:function(){return x(t)}},t.Id)}))}),Object(a.jsx)(Q,{children:g().map((function(t){return Object(a.jsx)(J,{channel:t,channelHeight:tt,timeBlock:c.timeBlock,highlight:s,onWatchShow:x},t.Id)}))})]})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var at=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,1800)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(nt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)})),at()}},[[1786,1,2]]]);
//# sourceMappingURL=main.146fc75f.chunk.js.map